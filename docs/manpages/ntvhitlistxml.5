.\" Automatically generated by Pod::Man version 1.15
.\" Fri Nov 22 12:11:09 2002
.\"
.\" Standard preamble:
.\" ======================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R

.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used
.\" to do unbreakable dashes and therefore won't be available.  \*(C` and
.\" \*(C' expand to `' in nroff, nothing in troff, for use with C<>
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr
.\" for titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and
.\" index entries marked with X<> in POD.  Of course, you'll have to process
.\" the output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it
.\" makes way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.bd B 3
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ======================================================================
.\"
.IX Title "ntvhitlistxml 5"
.TH ntvhitlistxml 5 "2.0.0" "2002-11-22" "NexTrieve"
.UC
.SH "NAME"
ntvhitlistxml \*(-- \s-1XML\s0 format of nextrieve search results. 
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Search results produced by a nextrieve search engine are in
\&\s-1XML\s0 form.  The \s-1DTD\s0 describing the format of nextrieve query \s-1XML\s0
can be found in \fIntvdtds\fR\|(5).
.PP
A nextrieve result list (or hitlist) is implemented as an
<ntv:hitlist> or <ntv:hl> container, depending on whether a
\&'longform=\*(L"1\*(R"' attribute or 'longform=\*(L"0\*(R"' attribute was specified
on the originating query.  The only difference between the two hitlist
forms are the tagnames.  The long form (the default) will be used
in this discussion.  A short ending section will summarize the short form.
.PP
A hitlist is simply a header followed by a sequence of \*(L"hits\*(R".  Each
hit represents an area of a document that is considered interesting to
the originator of the query, and they are returned in ranked order, from
\&\*(L"most interesting\*(R" to \*(L"least interesting\*(R".
Each hit contains (optionally) the attributes
attached to the document in the text index, (optionally) the preview text
of the most interesting area in the document and a document id.
.PP
The information in the hitlist header indicates the number of hits found,
the number of hits returned, and any error or warning information generated
as part of the search.
.PP
Ie, a hitlist has the following form:
.PP
.Vb 18
\&    <ntv:hitlist xmlns:ntv="http://www.nextrieve.com/1.0">
\&        <header ...>
\&            <warning ...>warning message</warning>
\&            <error ...>error message</error>
\&        </header>
\&        <hit ...>
\&            <attributes>
\&                <attr1>val1</attr1>
\&                <attr2>val2</attr2>
\&                ...
\&            </attributes>
\&            <preview>
\&                ...
\&            </preview>
\&        </hit>
\&        <hit ...>...</hit>
\&        ...
\&    </ntv:hitlist>
.Ve
If the originating query \s-1XML\s0 id=\*(L"val\*(R" attribute applied to the top level
<ntv:query> container, the same id value is returned as an attribute to
the top-level <ntv:hitlist> container.  If the
originating query had no id=\*(L"val\*(R" attribute, neither does the <ntv:hitlist>
element.
.Sh "<header>"
.IX Subsection "<header>"
This container is always present, although it may be empty.
If hits are returned, the header contains attributes describing the range of
hits.
.Ip "\fBfirsthit='n'\fR" 4
.IX Item "firsthit='n'"
The 1\-based offset in the complete nominal hit list of the first hit
actually being returned here.
.Ip "\fBdisplayedhits='n'\fR" 4
.IX Item "displayedhits='n'"
The number of hits actually being returned here.
.Ip "\fBtotalhits='n'\fR" 4
.IX Item "totalhits='n'"
The total number of hits that can be returned for this search.
.PP
The nested containers permitted inside a <header> container are
as follows.
.PP
.I "<error>...</error>"
.IX Subsection "<error>...</error>"
.PP
English error message text is present, indicating there was a structural
or other problem regarding the originating query.
.PP
It should be noted that for now there are no attributes applied to the
<error> container, but in the future there will be an error-id and 
other information describing the error in a language independant way.
.PP
.I "<warning>...</warning>"
.IX Subsection "<warning>...</warning>"
.PP
English warning message text is present, indicating that, although the
search was performed, there were some conditions present that might be
of interest.
.PP
Two examples are:
.Ip "\(bu" 4
A word being searched for does not exist in the dictionary (the word
is returned as part of the warning message text).
.Ip "\(bu" 4
The fuzzy or exact search was not supported by the text index, in which
case the search is changed to its other form.
.Sp
Eg, a fuzzy search was wanted, but the text index only supports exact searching,
in which case the query was changed automatically to an exact search query.
.Sh "<hit>"
.IX Subsection "<hit>"
Each <hit> container represents a hit.  Each <hit> container can
have the following attributes:
.Ip "\fBdocid='id'\fR" 4
.IX Item "docid='id'"
A nextrieve-internal document number.  This is currently informational
only.
.Ip "\fBscore='value'\fR" 4
.IX Item "score='value'"
A normally large nextrieve-generated score number.  This is currently
informational only.
.Ip "\fBpercent='value'\fR" 4
.IX Item "percent='value'"
A \*(L"percentage correctness\*(R" value if the originating search was a fuzzy
search.
.PP
Each hit container can contain two other nested containers.
.PP
.I "<attributes>"
.IX Subsection "<attributes>"
.PP
If the originating query did not prohibit the returning of attribute
information, all the attributes applied to the document are
returned here.  Each attribute value is returned by using:
.PP
.Vb 1
\&    <attrname>attrval</attrname>
.Ve
where \fIattrname\fR is the name of the attribute, and <attrval> its value.
For a flag-type attribute \fIflagattr\fR, if the flag is set <flagattr/>
is returned, otherwise nothing labelled \fIflagattr\fR is returned.
.PP
.I "<preview>"
.IX Subsection "<preview>"
.PP
If the originating query did not prohibit the returning of preview text,
the \*(L"most interesting\*(R" small text fragment of the interesting document
is returned here.  Words in the preview text considered relevant to the
original search are \*(L"highlighted\*(R" using information from the <highlight>
element in the resource file for the text index.  Note that, for a fuzzy
search, words may be highlighted in the preview text that are not
\&\fIidentical\fR to any original search word, but they should be \fIsimilar\fR
in some way.
.SH "SHORT FORM"
.IX Header "SHORT FORM"
The \*(L"short form\*(R" of the nextrieve hitlist follows the same structure
as the \*(L"long form\*(R", but with short tag names.  An example of the short
form of a hitlist is:
.PP
.Vb 18
\&    <ntv:hl xmlns:ntv="http://www.nextrieve.com/1.0">
\&        <hdr fh="n" dh="n" th="n">
\&            <warn>warning message</warn>
\&            <err>error message</err>
\&        </hdr>
\&        <h dn="n" sc="n" pc="n">
\&            <a>
\&                <attr1>val1</attr1>
\&                <attr2>val2</attr2>
\&                ...
\&            </a>
\&            <p>
\&                ...
\&            </p>
\&        </h>
\&        <h ...>...</hit>
\&        ...
\&    </ntv:hl>
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
.Vb 1
\&    ntvsearch(1), ntvsearchd(1), ntvresourcefile(1), ntvqueryxml(1)
.Ve
